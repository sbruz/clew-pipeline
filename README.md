

# Clew Book Content Pipeline

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç ‚Äî Python-–ø–∞–π–ø–ª–∞–π–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫–Ω–∏–≥ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è **Clew**.

–û–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
- üí¨ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫—É —Ç–µ–∫—Å—Ç–∞ (OpenAI)
- ‚úÇÔ∏è —Ä–∞–∑–±–∏–≤–∫—É –Ω–∞ –∞–±–∑–∞—Ü—ã
- üß± —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≥–ª–∞–≤–∞–º
- üßí —É–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–æ —É—Ä–æ–≤–Ω—è B1
- üåç –ø–µ—Ä–µ–≤–æ–¥ –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º
- üß† –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–±–æ—Ä —Å–ª–æ–≤ –∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- üéß –æ–∑–≤—É—á–∫—É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∏ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (ElevenLabs)
- üì¶ —ç–∫—Å–ø–æ—Ä—Ç –≤ `.json` –∏ `.mp3`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

clew/
‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ preprocess.py            # –í—Å–µ —ç—Ç–∞–ø—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –ø–µ—Ä–µ–≤–æ–¥–∞, –æ–∑–≤—É—á–∫–∏
‚îú‚îÄ‚îÄ schemas/                 # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (Pydantic)
‚îÇ   ‚îî‚îÄ‚îÄ translation_schema.py
‚îú‚îÄ‚îÄ utils/                   # –ö–ª–∏–µ–Ω—Ç—ã supabase, tools
‚îú‚îÄ‚îÄ export/                  # –§–∏–Ω–∞–ª—å–Ω—ã–µ .json –∏ .mp3 —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .env                     # API-–∫–ª—é—á–∏ (–≤ .gitignore)
‚îú‚îÄ‚îÄ config.yaml              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îî‚îÄ‚îÄ requirements.txt

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:
OPENAI_API_KEY=sk-...
SUPABASE_URL=https://...
SUPABASE_KEY=...
ELEVENLABS_API_KEY=...

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
pip install -r requirements.txt

–ó–∞–ø—É—Å–∫:
main.py

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ `config.yaml`
–í–∫–ª—é—á–∞–π—Ç–µ/–æ—Ç–∫–ª—é—á–∞–π—Ç–µ —à–∞–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
export/book_<id>.json ‚Äî –∏—Ç–æ–≥–æ–≤—ã–π JSON
export/voice_book_<id>/ ‚Äî –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã –∏ —Ç–∞–π–º–∏–Ω–≥–∏
